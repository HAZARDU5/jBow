<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>jBow</title>
  <meta name="description" content="jBow">
  <script src="aframe-master.js"></script>
  <script src="components/aabb-collider.js"></script>
  <script src="components/aframe-gridhelper-component.min.js"></script>
  <script src="components/aframe-meshline-component.min.js"></script>
  <script src="components/grab.js"></script>
  <script src="components/bow-and-arrow.js"></script>
  <script src="components/rotate-toward-velocity.js"></script>
  <script src="components/poissondisc-forest.js"></script>
  <script src="shaders/skyGradient.js"></script>
  <script src="aframe-physics-system.js"></script>
</head>
<body>

  <a-scene gridhelper id="scene" physics="debug:true" vr-mode-ui keyboard-shortcuts pool__arrow="mixin: arrowpool; size : 6;">

    <a-assets>
      <a-asset-item id="bow-obj" src="assets/models/sg-bow-2-obj/sg-bow-2-rotated.obj"></a-asset-item>
      <a-asset-item id="bow-mtl" src="assets/models/sg-bow-2-obj/sg-bow-2.mtl"></a-asset-item>
      <a-asset-item id="arrow-obj" src="assets/models/low-poly-arrow-obj/low-poly-arrow-rotated.obj"></a-asset-item>
      <a-asset-item id="arrow-mtl" src="assets/models/low-poly-arrow-obj/low-poly-arrow.mtl"></a-asset-item>
      <a-asset-item id="target-obj" src="assets/models/target/target.obj"></a-asset-item>
      <a-asset-item id="target-mtl" src="assets/models/target/target.mtl"></a-asset-item>
      <a-asset-item id="tree-obj" src="assets/models/tree-obj/tree.obj"></a-asset-item>
      <a-asset-item id="tree-mtl" src="assets/models/tree-obj/tree.mtl"></a-asset-item>
      <a-asset-item id="tree-toon-obj" src="assets/models/tree-toon-obj/tree-toon.obj"></a-asset-item>
      <a-asset-item id="tree-toon-mtl" src="assets/models/tree-toon-obj/tree-toon.mtl"></a-asset-item>
      <a-mixin id="arrowpool" dynamic-body="shape:box" scale="0.005 0.005 0.005" obj-model="obj: #arrow-obj; mtl: #arrow-mtl"></a-mixin>
      <audio id="arrow_release" src="assets/sounds/arrow_release.mp3">
      <audio id="arrow_impact" src="assets/sounds/arrow_impact.mp3">
      <audio id="draw_string" src="assets/sounds/draw_string.mp3">
    </a-assets>

    <!-- Sounds -->
    <a-sound id="arrow_release_sound" src="#arrow_release"></a-sound>
    <a-sound id="arrow_impact_sound"  src="#arrow_impact"></a-sound>
    <a-sound id="draw_string_sound"  src="#draw_string"></a-sound>
    
    <!-- Camera -->
    <a-entity camera look-controls></a-entity>

    <!-- Environment -->
    <a-entity id="sky"  geometry="primitive: sphere; radius: 65;" material="shader: skyGradient; colorTop: #353449; colorBottom: #BC483E; side: back"></a-entity>

    <a-plane color="#614126" static-body position="0 0 0" rotation="-90 0 0"  width="1000" height="1000"></a-plane>

    <!-- Lights-->

    <a-entity light="type: point; color: #f4f4f4; intensity: 0.2; distance: 0" position="8 30 18"></a-entity>

    <a-entity light="type: point; color: #f4f4f4; intensity: 0.6; distance: 0" position="-8 30 -18"></a-entity>

    <a-entity light="type: ambient; color: #f4f4f4; intensity: 0.4;" position="-8 10 -18"></a-entity>


    <!-- bow and arrow -->

    <a-entity id="preShotArrow" obj-model="obj: #arrow-obj; mtl: #arrow-mtl"position="0 0 0 " scale="0.05 0.05 0.05" visible="false"></a-entity>

    <a-entity bow-and-arrow  position="-0.5 1 -0.5"></a-entity>

    <a-entity id="bowLine" meshline="lineWidth: 20; path: 0 0 0 , 1 1 1; color: #E20049"></a-entity>
    
    <!-- Hands -->

    <a-entity id="leftHand" hand-controls="left" aabb-collider="objects:#bow;" grab></a-entity>
    <a-entity id ="rightHand" hand-controls="right" aabb-collider="objects:#bow;" grab></a-entity>


     <!-- Targets-->

    <a-entity class="target"  static-body scale="10 10 10" rotation="0 90 0" position = "0 2 -10" obj-model="obj: #target-obj; mtl: #target-mtl"></a-entity>
    <a-entity class="target" static-body scale="10 10 10"  rotation="0 90 0" position = "0 4 -12" obj-model="obj: #target-obj; mtl: #target-mtl"></a-entity>
    <a-entity class="target" static-body scale="10 10 10" rotation="0 90 0" position = "0 6 -14" obj-model="obj: #target-obj; mtl: #target-mtl"></a-entity>
    <a-box static-body color="red" position="0 0.5 -5" width="3" height="1" depth="1"></a-box>
    <a-box dynamic-body color="blue" position="5 0.5 0" width="1" height="1" depth="1"></a-box>

    <a-entity poissondisc-forest position="-15 0 -15"></a-entity>

  </a-scene>
  <script>

  </script>
</body>
</html>
